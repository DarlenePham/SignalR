# SignalR Real-time chat

This is a simple real-time chat app using SignalR and ASP.NET Web application. 
You can download it or make one by yourself. Below is the instruction how to make one.

1. In Visual Studio, create an ASP.NET Web Application.
2. In the New ASP.NET Project - SignalRChat window, leave Empty selected and select OK.
3. In Solution Explorer, right-click the project and select Add > New Item.
4. In Add New Item - SignalRChat, select Installed > Visual C# > Web > SignalR and then select SignalR Hub Class (v2).
5. Name the class ChatHub and add it to the project.
This step creates the ChatHub.cs class file and adds a set of script files and assembly references that support SignalR to the project.
6. Replace the code in the new ChatHub.cs class file with this code:
```
using System;
using System.Web;
using Microsoft.AspNet.SignalR;
namespace SignalRChat
{
    public class ChatHub : Hub
    {
        public void Send(string name, string message)
        {
            // Call the broadcastMessage method to update clients.
            Clients.All.broadcastMessage(name, message);
        }
    }
}
```
7. In Solution Explorer, right-click the project and select Add > New Item.
8. In Add New Item - SignalRChat select Installed > Visual C# > Web and then select OWIN Startup Class.
9. Name the class Startup and add it to the project.
10. Replace the default code in Startup class with this code:
```
using Microsoft.Owin;
using Owin;
[assembly: OwinStartup(typeof(SignalRChat.Startup))]
namespace SignalRChat
{
    public class Startup
    {
        public void Configuration(IAppBuilder app)
        {
            // Any connection or hub wire up and configuration should go here
            app.MapSignalR();
        }
    }
}
```
11. In Solution Explorer, right-click the project and select Add > HTML Page.
12. Name the new page index and select OK.
13. In Solution Explorer, right-click the HTML page you created and select Set as Start Page.
14. Replace the default code in the HTML page with this code:
```
<!DOCTYPE html>
<html>
<head>
    <title>SignalR Simple Chat</title>
    <style type="text/css">
        .container {
            background-color: #99CCFF;
            border: thick solid #808080;
            padding: 20px;
            margin: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <input type="text" id="message" />
        <input type="button" id="sendmessage" value="Send" />
        <input type="hidden" id="displayname" />
        <ul id="discussion">
        </ul>
    </div>
    <!--Script references. -->
    <!--Reference the jQuery library. -->
    <script src="Scripts/jquery-3.1.1.min.js" ></script>
    <!--Reference the SignalR library. -->
    <script src="Scripts/jquery.signalR-2.2.1.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="signalr/hubs"></script>
    <!--Add script to update the page and send messages.--> 
    <script type="text/javascript">
        $(function () {
            // Declare a proxy to reference the hub. 
            var chat = $.connection.chatHub;
            // Create a function that the hub can call to broadcast messages.
            chat.client.broadcastMessage = function (name, message) {
                // Html encode display name and message. 
                var encodedName = $('<div />').text(name).html();
                var encodedMsg = $('<div />').text(message).html();
                // Add the message to the page. 
                $('#discussion').append('<li><strong>' + encodedName
                    + '</strong>:&nbsp;&nbsp;' + encodedMsg + '</li>');
            };
            // Get the user name and store it to prepend to messages.
            $('#displayname').val(prompt('Enter your name:', ''));
            // Set initial focus to message input box.  
            $('#message').focus();
            // Start the connection.
            $.connection.hub.start().done(function () {
                $('#sendmessage').click(function () {
                    // Call the Send method on the hub. 
                    chat.server.send($('#displayname').val(), $('#message').val());
                    // Clear text box and reset focus for next comment. 
                    $('#message').val('').focus();
                });
            });
        });
    </script>
</body>
</html>
```
15. In Solution Explorer, expand Scripts.
Script libraries for jQuery and SignalR are visible in the project.
```
Important

The package manager may have installed a later version of the SignalR scripts.
```
16. Check that the script references in the code block correspond to the versions of the script files in the project.
Script references from the original code block:
```
<!--Script references. -->
<!--Reference the jQuery library. -->
<script src="Scripts/jquery-3.1.1.min.js" ></script>
<!--Reference the SignalR library. -->
<script src="Scripts/jquery.signalR-2.2.1.min.js"></script>
```
17. If they don't match, update the .html file.
18. From the menu bar, select File > Save All.

Run the sample and enjoy!
